{
  "id": "urn:ngsi-ld:plan:55761it5-3d4q-2321-p009-44bro198re0q",
  "name": "DOME Cloud Service Provider Subscription plan for 2025",
  "description": "DOME Cloud Service Provider Subscription plan for 2025",
  "validFor": {
    "startDateTime": "2025-01-01T00:00:00Z",
    "endDateTime": "2025-12-31T23:59:59Z"
  },
  "lifecycleStatus": "launched",
  "billCycleSpecification": {
    "billingPeriodLength": "1",
    "billingPeriodType": "MONTH",
    "billingPeriodEnd": "LAST_DAY_OF_CALENDAR_MONTH",
    "billingDateShift": "5",
    "paymentDueDateOffset": "45"
  },
  "subscriptionDurationLength": 12,
  "subscriptionDurationPeriodType": "MONTH",
  "agreements": [],
  "price": {
    "name": "Price components for \"${subscription.name}\" activated on ${subscription.startDate}",
    "isBundle": true,
    "currency": "EUR",
    "bundleOp": "CUMULATIVE",
    "prices": [
      {
        "name": "Initial Subscription Fee",
        "type": "RECURRING_PREPAID",
        "recurringChargePeriodLength": 1,
        "recurringChargePeriodType": "YEAR",
        "amount": 8000,
        "currency": "EUR",
        "ignore": "'${subscription.characteristics.marketplaceSubscription}'=='true'",
        "discount": {
          "name": "Discount based on transactions during the previous subscription period (€${activatingMetricValue})",
          "isBundle": true,
          "bundleOp": "ALTERNATIVE_HIGHER",
          "applicableBaseReferencePeriod": "PREVIOUS_SUBSCRIPTION_PERIOD",
          "applicableBase": "bills-no-taxes",
          "computationBase": "parent-price",
          "discounts": [
            {
              "name": "Transactions volume below 100.000€. No discount.",
              "applicableBaseRange": {
                "min": 0,
                "max": 100000
              },
              "computationBase": "parent-price",
              "percent": 0
            },
            {
              "name": "Transactions volume between 100.000€ and 250.000€: 15% discount.",
              "applicableBaseRange": {
                "min": 100001,
                "max": 250000
              },
              "computationBase": "parent-price",
              "percent": 15
            },
            {
              "name": "Transactions volume between 250.000€ and 750.000€: 30% discount.",
              "applicableBaseRange": {
                "min": 250001,
                "max": 750000
              },
              "computationBase": "parent-price",
              "percent": 30
            },
            {
              "name": "Transactions volume between 750.000€ and 1.000.000€: 50% discount.",
              "applicableBaseRange": {
                "min": 750001,
                "max": 1000000
              },
              "computationBase": "parent-price",
              "percent": 50
            },
            {
              "name": "Transactions volume above 1.000.000€: 80% discount",
              "applicableBaseRange": {
                "min": 1000001
              },
              "computationBase": "parent-price",
              "percent": 80
            }
          ]
        }
      },
      {
        "name": "(FM) Revenue sharing based on transactions of sub-sellers (ver. 1: look at transactions of subsellers) ",
        "recurringChargePeriodType": "MONTH",
        "recurringChargePeriodLength": 1,
        "type": "RECURRING_POSTPAID",
        "ignore": "'${subscription.characteristics.marketplaceSubscription}'!='true'",
        "isBundle": true,
        "collapse": false,
        "bundleOp": "FOREACH",
        "skipIfZero": false,
        "forEachMetric": "activeSellersBehindMarketplace",
        "prices": [
          {
            "name": "Share of 1% on €${computationMetricValue} of transactions of ${sellerBehindMarketplace.name} between ${chargePeriod.startDate} and ${chargePeriod.endDate}",
            "computationBaseReferencePeriod": "CURRENT_CHARGE_PERIOD",
            "computationBase": "bills-no-taxes",
            "percent": 1,
            "currency": "EUR",
            "ignore": false,
            "skipIfZero": true
          }
        ]
      },      
      {
        "name": "(FM) Revenue sharing based on transactions of sub-sellers (ver. 2: look at revenue bills issued by FM) ",
        "recurringChargePeriodType": "MONTH",
        "recurringChargePeriodLength": 1,
        "type": "RECURRING_POSTPAID",
        "ignore": "'${subscription.characteristics.marketplaceSubscription}'!='true'",
        "isBundle": true,
        "collapse": false,
        "bundleOp": "FOREACH",
        "skipIfZero": false,
        "forEachMetric": "billedSellersBehindMarketplace",
        "prices": [
          {
            "name": "Share of 50% on €${computationMetricValue} of fees received from ${sellerBehindMarketplace.name} between ${chargePeriod.startDate} and ${chargePeriod.endDate}",
            "computationBaseReferencePeriod": "CURRENT_CHARGE_PERIOD",
            "computationBase": "bills-no-taxes",
            "percent": 50,
            "currency": "EUR",
            "ignore": false,
            "skipIfZero": true
          }
        ]
      },
      {
        "name": "(CSP) Revenue sharing based on transactions (€${computationMetricValue}) between ${chargePeriod.startDate} and ${chargePeriod.endDate}",
        "applicableBase": "bills-no-taxes",
        "applicableBaseReferencePeriod": "LAST_9_CHARGE_PERIODS",
        "computationBaseReferencePeriod": "CURRENT_CHARGE_PERIOD",
        "computationBase": "bills-no-taxes",
        "currency": "EUR",
        "isBundle": true,
        "bundleOp": "CUMULATIVE",
        "recurringChargePeriodType": "MONTH",
        "recurringChargePeriodLength": 1,
        "collapse": false,
        "skipIfZero": false,
        "type": "RECURRING_POSTPAID",
        "ignore": "'${subscription.characteristics.marketplaceSubscription}'=='true'",
        "prices": [
          {
            "name": "Tier 0: no revenue sharing on transactions below 100.000€",
            "amount": 0,
            "skipIfZero": false
          },
          {
            "name": "Tier 1: 4% revenue sharing on transactions between 100.000€ and 200.000€",
            "computationBase": "bills-no-taxes",
            "percent": 4,
            "discount": {
              "comment": "this is the 'min' of the tier x tier percentage",
              "amount": 4000
            },
            "resultingAmountRange": {
              "comment": "min is always zero. Max is the tier width x tier percentage (i.e. the max revenue for the tier window)",
              "min": 0,
              "max": 4000
            },
            "collapse": true,
            "skipIfZero": true
          },
          {
            "name": "Tier 2: 3% revenue sharing on transactions between 200.000€ and 500.000€",
            "percent": 3,
            "discount": {
              "name": "removing the lower part",
              "comment": "this is the 'min' of the tier x tier percentage",
              "amount": 6000
            },
            "resultingAmountRange": {
              "comment": "min is always zero. Max is the tier width x tier percentage (i.e. the max revenue for the tier window)",
              "min": 0,
              "max": 9000
            },
            "collapse": true,
            "skipIfZero": true
          },
          {
            "name": "Tier 3: 2% revenue sharing on transactions between 500.000€ and 800.000€",
            "percent": 2,
            "discount": {
              "name": "removing the lower part",
              "comment": "this is the 'min' of the tier x tier percentage",
              "amount": 10000
            },
            "resultingAmountRange": {
              "comment": "min is always zero. Max is the tier width x tier percentage (i.e. the max revenue for the tier window)",
              "min": 0,
              "max": 6000
            },
            "collapse": true,
            "skipIfZero": true
          },
          {
            "name": "Tier 4: 1% revenue sharing on transactions above 800.000€",
            "percent": 1,
            "discount": {
              "name": "removing the lower part",
              "comment": "this is the 'min' of the tier x tier percentage",
              "amount": 8000
            },
            "resultingAmountRange": {
              "comment": "min is always zero. Max is the tier width x tier percentage (i.e. the max revenue for the tier window)",
              "min": 0
            },
            "collapse": true,
            "skipIfZero": true
          }
        ]
      }
    ]
  }
}