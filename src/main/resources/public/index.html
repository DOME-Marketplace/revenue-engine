<html>
	
	<meta charset="UTF-8">

    <head>
        <title>Revenue Sharing Dev Dashboards</title>
        <link rel="stylesheet" type="text/css" href="css/revenue.css">
        <link rel="icon" type="image/png" href="media/dome_logo.png">
        <script type="text/javascript" src="js/revenue.js"></script>
    </head>
    
    <body onload="getLanes()">

        <div id="lanesContainer"></div>

        <!-- TEMPLATES -->
        <div id="templates" style="display:none">

            <table name="seller_info_template" class="box">
                <tr><td><h4>From (seller)</h4></td></tr>
                <tr><td><span name="name" class="oneline"></span></td></tr>
                <tr><td><i name="dome_id" class="oneline"></i></td></tr>
            </table>

            <table name="buyer_info_template" class="box">
                <tr><td><h4>To (buyer)</h4></td></tr>
                <tr><td><span name="name" class="oneline"></span></td></tr>
                <tr><td><i name="dome_id" class="oneline"></i></td></tr>
            </table>

            <table name="invoice_details_template" class="box">
                <tr><td><h4>Bill</h4></td></tr>
                <tr><td>Order&nbsp;ref.</td><td name="orderRef" style="text-align:right">n/a</td></tr>
                <tr><td>Product&nbsp;ref.</td><td name="productRef" style="text-align:right"></td></tr>
                <tr><td colspan="2"><hr></td></tr>
                <tr><td>Bill no.</td><td name="billNo" style="text-align:right">n/a</td></tr>
                <tr><td>Bill period</td><td name="billPeriod" use_template="period" style="text-align:right"></td></tr>
                <tr><td>Bill date</td><td name="billDate" style="text-align:right"></td></tr>
                <tr><td>Next&nbsp;bill&nbsp;date</td><td name="nextBillDate" style="text-align:right"></td></tr>
            </table>

            <table name="invoice_payment_details_template" class="box">
                <tr><td><h4>Payment</h4></td></tr>
                <tr><td>Terms</td><td name="paymentTerms" style="text-align:right"></td></tr>
                <tr style="font-weight:bold"><td>Due date</td><td name="paymentDueDate" style="text-align:right"></td></tr>
            </table>

            <table name="invoice_amount_summary_template" class="box">
                <tr><td><h4>Totals</h4></td></tr>
                <tr><td>Net amount</td><td name="taxExcludedAmount" use_template="money" style="text-align:right"></td></tr>
                <tr><td>Taxes</td><td name="totalTaxAmount" use_template="money" style="text-align:right"></td></tr>
                <tr style="font-weight:bold"><td>Total due amount</td><td name="taxIncludedAmount" use_template="money" style="text-align:right"></td></tr>
            </table>

            <div name="invoice_summary_template" class="invoice tmfbox">
                <h3>Invoice (generated from CB and ACBRs; not on TMF)</h3>
                <table style="width:100%">
                    <tr>
                        <td style="vertical-align:bottom">
                            <div name="sellerInfo" use_template="seller_info"></div>
                            <div name="buyerInfo" use_template="buyer_info"></div>
                        </td>
                        <td style="vertical-align:bottom">
                            <div name="billDetails" use_template="invoice_details"></div>
                        </td>
                    </tr>
                </table>

                <table style="width:100%">
                    <tr>
                        <td>
                            <table name="invoiceItems" use_template="invoice_items" class="box"></table>
                        </td>
                    </tr>
                </table>

                <table style="width:100%">
                    <tr>
                        <td style="vertical-align:bottom">
                            <div name="paymentDetails" use_template="invoice_payment_details"></div>
                        </td>
                        <td style="vertical-align:bottom">
                            <div name="summary" use_template="invoice_amount_summary"></div>
                        </td>
                    </tr>
                </table>
            </div>

            <table>
                <tbody name="invoice_items_template">
                    <tr style="font-weight:bold">
                        <td>Description</td>
                        <td style="text-align:right; white-space:nowrap">Net amount</td>
                        <td style="text-align:right; white-space:nowrap">Tax %</td>
                        <td style="text-align:right; white-space:nowrap">Tax amount</td>
                    </tr>
                </tbody>
            </table>

            <table>
                <tr name="invoice_items_item_template" style="font-size:0.8em">
                    <td class="invoiceitem" style="text-align:left; white-space:unset; width:70%"><span name="description"></span></td>
                    <td class="invoiceitem" style="width:10%"><span name="netAmount" use_template="money"></span></td>
                    <td class="invoiceitem" style="width:10%"><span name="vatPercent"></span></td>
                    <td class="invoiceitem" style="width:10%"><span name="vat" use_template="money"></span></td>
                </tr>
            </table>

            <div name="plan_summary_template" class="plan tmfbox">
                <b name="name"></b> - <i><span name="description"></span></i><br>
                <i name="id" style="font-size:8pt"></i><br/>
                <div name="price"></div>
                Status: <span name="lifecycleStatus"></span>
                <div name="billCycleSpecification"></div>
                <div name="agreements"></div>
                <div name="validFor"></div>
                <button onclick="fetchAndShowSubscriptions(this.parentNode);">subscribers</button>
            </div>

            <div name="plan_short_summary_template" class="plan tmfbox">
                <h3>Plan</h3>
                <b name="name"></b><br/>
                <i name="id" style="font-size:8pt"></i>
                <div></div>
                Status: <span name="lifecycleStatus"></span>
                <span name="validFor"></span>
                <hr/>
                <button onclick="fetchAndShowSubscriptions(this.parentNode);">subscribers</button>
                <button onclick="fetchAndShowPlan(this.parentNode);">details</button>
                <button onclick="fetchAndShowRaw(this.parentNode);" disabled>raw</button>
            </div>

            <div name="subscription_short_summary_template" class="subscription tmfbox">
                <h3>Subscription</h3>
                <b name="name"></b><br/>
                <i name="id" style="font-size:8pt"></i>
                <div></div>
                Status: <span name="status"></span>
                <div>
                Subscribed on: <b name="startDate"></b>
                </div>
                <hr/>
                <button onclick="fetchAndShowStatements(this.parentNode);">statements</button>
                <button onclick="fetchAndShowBills(this.parentNode);">bills</button>
                <button onclick="fetchAndShowCustomerBills(this.parentNode);">CBs</button>
                <button onclick="fetchAndShowRaw(this.parentNode);">raw</button>
            </div>

            <div name="generic_template" class="generic tmfbox">
                <h3>Generic viewer<h3>
                <span name="name"></span><br/>
                <span name="description"></span></span><br/>
                <span name="id"></span></span>
            </div>

            <div name="statement_short_summary_template" class="statement tmfbox">
                <h3>Revenue Statement</h3>
                <div name="period"></div>
                <div name="revenueItems"></div>
            </div>

            <div name="bill_short_summary_template" class="bill tmfbox">
                <h3>Revenue Bill</h3>
                <i name="id" style="font-size:8pt"></i>
                <div name="period"></div>
                <div name="revenueItems"></div>
                <hr/>
                <button onclick="fetchAndShowCustomerBill(this.parentNode);">CB</button>
                <button onclick="fetchAndShowACBRs(this.parentNode);">ACBRs</button>
                <button onclick="fetchAndShowRaw(this.parentNode);">raw CB</button>
                <button onclick="fetchAndShowInvoice(this.parentNode);">Invoice</button>
                <button onclick="fetchAndShowRawInvoice(this.parentNode);">raw invoice</button>
            </div>

            <div name="cb_summary_template" class="cb tmfbox">
                <h3>Customer Bill</h3>
                <i name="id" style="font-size:8pt"></i>
                <div name="period"></div>
                <table class="box">
                    <tr><td>Bill no</td><td name="billNumber" style="text-align:right">n/a</td></tr>
                    <tr><td>Bill period</td><td name="billingPeriod" use_template="period" style="text-align:right"></td></tr>
                    <tr><td>Bill date</td><td name="billDate" style="text-align:right"></td></tr>
                    <tr><td>Next bill date</td><td name="nextBillDate" style="text-align:right"></td></tr>
                </table>
                <table class="box">
                    <tr><td>Amount due</td><td name="amountDue" use_template="money" style="text-align:right"></td></tr>
                    <tbody name="taxItem"></tbody>
                    <tr><td>Remaining amount</td><td name="remainingAmount" use_template="money" style="text-align:right"></td></tr>
                    <tr><td>Payment due date</td><td name="paymentDueDate" style="text-align:right"></td></tr>
                </table>
                <div name="taxItemx"></div>
                <hr/>
                <button onclick="fetchAndShowACBRs(this.parentNode);">ACBRs</button>
                <button onclick="fetchAndShowRawACBRs(this.parentNode);">raw ACBRs</button>
                <button onclick="fetchAndShowInvoice(this.parentNode);">Invoice</button>
                <button onclick="fetchAndShowRawInvoice(this.parentNode);">raw invoice</button>
                <button onclick="fetchAndShowRaw(this.parentNode);">raw</button>
            </div>

            <div name="acbr_short_summary_template" class="acbr tmfbox">
                <h3>Applied Customer Billing Rate</h3>
                <i name="id" style="font-size:8pt"></i><br/>
                <b name="name"></b><br/>

                <table class="box">
                    <tr><td>Period Coverage</td><td name="periodCoverage" use_template="period" style="text-align:right"></td></tr>
                    <tr><td>Charge Date</td><td name="date" style="text-align:right"></td></tr>
                </table>
                <table class="box">
                    <tr><td>Tax-excluded amount</td><td name="taxExcludedAmount" use_template="money" style="text-align:right"></td></tr>
                    <tbody name="appliedTax" use_template="taxItem"></tbody>
                    <tr style="border:1px solid gray"><td>Tax-included amount</td><td name="taxIncludedAmount" use_template="money" style="text-align:right"></td></tr>
                </table>
                <hr/>
                <button onclick="fetchAndShowInvoice(this.parentNode, this.parentNode.object.bill.id);">Invoice</button>
                <button onclick="fetchAndShowRawInvoice(this.parentNode, this.parentNode.object.bill.id);">containing raw invoice</button>
            </div>            

            <table>
                <tbody name="taxItem_template" skip="true">        
                </tbody>
            </table>

            <table>
                <tr name="taxItem_item_template">
                    <td>Tax item (<span name="taxCategory"></span>)</td>
                    <td style="text-align:right"><span name="taxAmount" use_template="money"></span></td>
                </tr>
            </table>

            <span name="money_template"><span name="value"></span> <span name="unit"></span></span>

            <div name="price_template">        
                <u>This plan has a very complex price</u>
            </div>

            <span name="period_template" style="white-space:nowrap">
                <span name="startDateTime"></span> to <span name="endDateTime"></span>
            </span>

            <div name="validFor_template">        
                Can be subscribed between
                <b name="startDateTime"></b>
                and
                <b name="endDateTime"></b>
            </div>

            <div name="health_template">        
                Status: <span name="status"></span>
            </div>

            <div name="agreements_template">
                <b>Agreements list</b>
                <ol name="content"></ol>
            </div>            

            <li name="agreements_item_template">
                <span name="text"></span>
            </li>            

            <div name="revenueItems_template">
                <b>Revenue Items</b>
                <div name="content"></div>
            </div>            

            <!-- this is the topmost element -->
            <div name="revenueItems_item_template" style="font-size:0.8em;">
                
                <div style="display:flex;">
                    <span style="width:90%; margin-right:auto;" class="indent">
                        [<span name="chargeTime"></span>]
                        <span name="name"></span>
                    </span>
                    <span style="font-weight:bold; white-space:nowrap"><span name="overallValue"></span> €</span>
                </div>
                <div name="items" style="background-color:rgba(0, 0, 0, 0.05);" class="revenueItem"></div>
            </div>            

            <div name="items_item_template">
                <div style="display:flex;">
                    <span style="width:90%; margin-right:auto;" class="indent">&bull; <span name="name"></span></span>
                    <span style="white-space:nowrap"><span name="overallValue"></span> €</span>
                </div>
                <div style="background-color:rgba(0, 0, 0, 0.05); opacity:0.8" class="revenueItem">
                    <div style="display:flex;">
                        <span style="margin-right:auto">&bull; Base value:</span> 
                        <span><span name="value"></span> €</span>
                    </div>
                    <div name="items"></div>                
                </div>
            </div>            

            <div name="billCycleSpecification_template">
                <b>Billing schedule:</b>
                billed every 
                <span name="billingPeriodLength"></span> <span name="billingPeriodType"></span> 
                on the <span name="billingPeriodEnd"></span>.
                With a billing shift of <span name="billingDateShift"></span> days, 
                and a payment due date after <span name="paymentDueDateOffset"></span> days.
            </div>

            <div name="organization_template" class="organization tmfbox">
                <b name="tradingName"></b><br/>
                <i name="id" style="font-size:8pt"></i><br/>
                <p name="organizationIdentification"></p>
                <p>Characteristic(s): <ul name="partyCharacteristic"></ul></p>
                <hr/>
                <button onclick="fetchAndShowTransactions(this.parentNode);">transactions (as seller)</button>
                <button onclick="fetchAndShowPurchasedProducts(this.parentNode);">products (as buyer)</button>
                <button onclick="fetchAndShowSoldProducts(this.parentNode);">products (as seller)</button>
                <button onclick="fetchAndShowDashboard(this.parentNode);">dashboard</button>
                <button onclick="fetchAndShowRaw(this.parentNode);" disabled>raw</button>
            </div>

            <li name="partyCharacteristic_item_template">
                <i name="name"></i>: <span name="value"></span>
            </li>
            <span name="organizationIdentification_item_template">
                <b name="identificationId"></b> issued by <span name="issuingAuthority"></span>
            </span>

            <div name="product_template" class="product tmfbox">
                <b name="name"></b><br/>
                <i name="id" style="font-size:8pt"></i><br/>
            </div>

        </div>
    
    </body>

</html>